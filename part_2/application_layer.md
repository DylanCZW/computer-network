# 第二章：应用层

# 应用层协议原理:

1. 网络应用程序体系结构

    * 客户-服务器体系结构：有一个总是打开的主机称为服务器，它服务于来自其他称为客户的主机的请求。
    * P2P体系结构：应用程序在间断连接的主机对之间直接通信，这些主机称为对等方。

2. 进程通信

    * 客户-服务器进程：发起通信的进程那一端被标识为客户端，在会话开始时等待联系的进程被标识为服务器端。
    * 进程与计算机网络之间的接口：应用层的应用进程通过socket向运输层发送数据。socket是一台主机内应用层与网络之间的应用程序编程接口。
    * 进程寻址：为了标识接收进程，需要注明主机的地址（由IP地址确定）以及在目的主机中指定接收进程的标识符（目的地端口号。

3. 可供应用程序使用的运输服务

    * 可靠数据传输：一个协议确保了由应用程序的一端发送数据正确，完全地交付给应用程序的另一端。
    * 吞吐量：可用吞吐量就是发送进程能够向接收进程交付比特的速率，运输层协议能够以某种特定的速率提供确保可用的吞吐量。
    * 定时：保证发送方从注入套接字每个比特到达接收方套接字最大延迟时间
    * 安全性：运输层协议能够在将数据交付给接收进程之前解密这些数据。除此之外，还包括完整性和端点鉴别的服务。

4. 因特网提供的运输服务
    * TCP服务：包括面向连接服务和可靠数据传输服务。
        * 面向连接的服务：在应用层数据报文开始流动之前，TCP让客户与服务器交换运输层控制信息。在握手阶段，TCP连接就在两个进程的套接字之间建立了一个全双工的通道。
        *可靠的数据传送服务：通信进程可以通过TCP无差错，按顺序地交付所有发送的数据。
        *拥塞控制机制：当发送方与接收方之间的网络出现拥塞时，TCP拥塞机制可以抑制发送进程。以此限制每个TCP连接，使其公平共享网络带宽。
    * UDP服务：提供不可靠数据传输服务。
    * 因特网运输协议不提供的服务：不提供吞吐量和定时保证。
5. 应用层协议
    应用层协议定义了运行在不同端系统上的应用程序如何相互传递报文。  
    * 交换的报文类型，例如请求报文和响应报文
    * 各种报文类型的语法，如报文各个字段及这些字段是如何描述的。
    * 字段的语义：即字段中信息的意义
    * 确定一个进程何时以及如何发送报文，对报文响应的规则。
    要区分网络应用与应用层协议，应用层协议只是网络应用的一部分，例如一个WEB应用有很多组成部分，包括文档格式标准（HTML），Web浏览器（Firefox)，Web服务器(Apache，Microsoft服务器程序）以及一个应用层协议（HTTP），它定义了浏览器和Web服务器之间传输的报文格式和序列。用于电子邮件的主要应用层协议是SMTP以及POP3，目录服务应用层协议有DNS协议，流式视频有CDN协议，P2P有BitTorrent协议等。后面会一一介绍。

